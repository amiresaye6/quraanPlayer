<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quran Player with Metadata</title>
  <style>
    #metadata {
      margin-top: 20px;
      font-family: Arial, sans-serif;
    }
  </style>
</head>
<body>
  <div id="quran-player">
    <h2>Quran Player</h2>

    <!-- Audio player element -->
    <audio id="audioPlayer" controls>
      <source id="audioSource" src="" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>

    <!-- Dropdown to select a surah -->
    <select id="surahSelect" onchange="playSurah()">
      <option value="">Select Surah</option>
      <option value="al-fatiha.mp3">Al-Fatiha</option>
      <option value="al-baqarah.mp3">Al-Baqarah</option>
      <!-- Add more surahs here -->
    </select>

    <!-- Display surah metadata -->
    <div id="metadata">
      <p><strong>Surah:</strong> <span id="surahName"></span></p>
      <p><strong>Reciter:</strong> <span id="surahReciter"></span></p>
      <p><strong>Duration:</strong> <span id="surahDuration"></span></p>
      <p><strong>Bitrate:</strong> <span id="surahBitrate"></span></p>
      <p><strong>Sample Rate:</strong> <span id="surahSampleRate"></span></p>
    </div>
  </div>

  <script>
    // Function to fetch and play a surah
    function playSurah() {
      const surahSelect = document.getElementById('surahSelect');
      const surah = surahSelect.value;

      if (surah) {
        // Fetch the metadata and audio file from the backend
        fetch(`http://localhost:3000/quran/${surah}`)
          .then(response => response.json())
          .then(data => {
            // Set the audio file URL
            const audioSource = document.getElementById('audioSource');
            audioSource.src = data.fileUrl;
            const audioPlayer = document.getElementById('audioPlayer');
            audioPlayer.load();
            audioPlayer.play();

            // Display the metadata
            document.getElementById('surahName').innerText = data.metadata.name;
            document.getElementById('surahReciter').innerText = data.metadata.reciter;
            document.getElementById('surahDuration').innerText = data.metadata.duration;
            document.getElementById('surahBitrate').innerText = data.metadata.bitrate ? data.metadata.bitrate + ' kbps' : 'N/A';
            document.getElementById('surahSampleRate').innerText = data.metadata.sampleRate ? data.metadata.sampleRate + ' Hz' : 'N/A';
          })
          .catch(error => console.error('Error fetching surah metadata:', error));
      }
    }
  </script>
</body>
</html>
